<!--
  @description       : 
  @author            : Pelleg Maimon
  @group             : 
  @last modified on  : 12-15-2021
  @last modified by  : Pelleg Maimon
-->
<template>
    <div style="background:white;" class="slds-tabs_default slds-sub-tabs">
        <ul class="slds-tabs_default__nav" role="tablist">
          <li data-name="main" class="slds-tabs_default__item slds-sub-tabs__item slds-grid slds-grid_vertical-align-center slds-active slds-border_right slds-border_left" role="presentation">
            <a data-name="main" onclick={choosePage} aria-controls="subtab-tabpanel-01" aria-selected="true" class="slds-tabs_default__link slds-p-horizontal_xx-small" href="javascript:void(0)" id="subtab-tabitem-01" role="tab" tabindex="0" title="00071938">
              <span class="slds-truncate" title="Metadata Types">Metadata Types</span>
            </a>
          </li>
            <template for:each={data} for:item="title">
                <li key={title.name} data-name={title.name} class="slds-active slds-sub-tabs__item slds-grid slds-grid_vertical-align-center slds-border_right" role="presentation">
                    <a data-name={title.name} onclick={choosePage} aria-controls="subtab-tabpanel-02" aria-selected="false" class="slds-tabs_default__link slds-p-horizontal_xx-small" href="javascript:void(0)" id={title.name} role="tab" tabindex="-1" title={title.name}>
                      <span class="slds-truncate" title={title.name}>{title.name}</span>
                    </a>
                    <div class="slds-col_bump-left slds-p-left_none slds-p-right_none">
                      <button data-name={title.name} class="slds-button slds-button_icon slds-button_icon-container slds-button_icon-x-small" tabindex="0" onclick={closePage}>
                          <lightning-icon size="xx-small" icon-name="utility:close" alternative-text="Error!" title="Error"></lightning-icon>
                      </button>
                    </div>
                </li>
            </template>
        </ul>
        <div data-name="main" aria-labelledby="subtab-tabitem-01" class="slds-tabs_default__content slds-tabs__content slds-show" id="subtab-tabpanel-01" role="tabpanel">
          <c-cb_-metadata-types onrecords={handleRecords}></c-cb_-metadata-types>
        </div>
        <template for:each={data} for:item="title">
          <div key={title.name} data-name={title.name} aria-labelledby="subtab-tabitem-01" class="slds-tabs__content" role="tabpanel">
            <c-cb_-metadata_-tab onretrieveandcompare={handleEditRefresh} onupdaterecordfields={refreshRecords} metadata={title}></c-cb_-metadata_-tab>
          </div>
        </template>
    </div>
    <lightning-spinner if:false={loaded} alternative-text="Loading"></lightning-spinner>
</template>