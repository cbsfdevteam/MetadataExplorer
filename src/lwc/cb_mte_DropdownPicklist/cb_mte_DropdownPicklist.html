<!--
  @description       : 
  @author            : Pelleg Maimon
  @group             : 
  @last modified on  : 12-15-2021
  @last modified by  : Pelleg Maimon
-->
<template>
    <div class="slds-form-element cbpicklist" >
        <label class="slds-form-element__label" for="combobox-id-5">{title}</label>
        <div class="slds-form-element__control">
          <div class="slds-combobox_container slds-size_small">
            <div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click" aria-expanded="true" aria-haspopup="listbox" role="combobox">
              <div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right" role="none" style="display: flex;">
                <input onclick={openClose} type="text" style="cursor:pointer;" class="slds-input slds-combobox__input slds-has-focus slds-combobox__input-value" id="combobox-id-5" aria-controls="listbox-id-5" autocomplete="off" role="textbox" placeholder={placeholder} readonly="" value={numberOfSelected}
                />
                <lightning-button if:true={showallbutton} onclick={openCloseAll} variant="brand" label="All"></lightning-button>
              </div>
              <div id="listbox-id-5" class="slds-dropdown slds-dropdown_length-5 slds-dropdown_fluid" role="listbox">
                <ul class="slds-listbox slds-listbox_vertical" role="presentation">
                    <template for:each={fields} for:item="field">
                        <li key={field} data-name={field.name} onclick={selectField} role="presentation" class="slds-listbox__item">
                            <div aria-checked="true" class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small slds-is-selected" role="option">
                                <span class="slds-media__body">
                                    <span class="slds-truncate" title={field.name}>{field.name}</span>
                                </span>
                            </div>
                        </li>
                    </template>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <lightning-spinner if:false={loaded} alternative-text="Loading"></lightning-spinner>
</template>